/* ====== Base ====== */
:root{
  --bg: #0b0d12;
  --panel: rgba(255,255,255,.06);
  --panel2: rgba(255,255,255,.09);
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.65);
  --border: rgba(255,255,255,.12);
  --shadow: 0 18px 50px rgba(0,0,0,.45);

  --common: rgba(255,255,255,.25);
  --uncommon: rgba(60, 255, 190, .50);
  --rare: rgba(80, 160, 255, .60);
  --legendary: rgba(255, 170, 60, .75);
  --ultrax: rgba(255, 70, 220, .80);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color: var(--text);
  background:
    radial-gradient(1100px 700px at 20% 10%, rgba(90,140,255,.18), transparent 55%),
    radial-gradient(900px 600px at 90% 20%, rgba(255,120,200,.12), transparent 55%),
    radial-gradient(900px 600px at 40% 90%, rgba(60,255,190,.08), transparent 55%),
    var(--bg);
}

/* ====== Layout ====== */
.topbar{
  position: sticky;
  top:0;
  z-index: 20;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding: 14px 18px;
  border-bottom: 1px solid var(--border);
  background: rgba(8,10,14,.72);
  backdrop-filter: blur(10px);
}
.page{
  max-width: 1200px;
  margin: 0 auto;
  padding: 22px 16px 36px;
}
.panel{
  background: linear-gradient(180deg, var(--panel), rgba(255,255,255,.03));
  border: 1px solid var(--border);
  border-radius: 22px;
  box-shadow: var(--shadow);
  padding: 18px;
}
.panel__row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:16px;
  flex-wrap: wrap;
}
.panel__actions{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap: wrap;
}
.footer{
  border-top: 1px solid var(--border);
  padding: 18px 16px;
  background: rgba(8,10,14,.35);
}
.footer__inner{
  max-width: 1200px;
  margin: 0 auto;
  display:flex;
  justify-content:space-between;
  gap:10px;
}

/* ====== Brand + Nav ====== */
.brand{ display:flex; align-items:center; gap:12px; min-width: 220px; }
.brand__mark{
  width: 42px; height: 42px; border-radius: 14px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), rgba(255,255,255,.18) 40%, rgba(255,255,255,.05) 70%),
              linear-gradient(135deg, rgba(80,160,255,.9), rgba(255,70,220,.7));
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: 0 14px 35px rgba(0,0,0,.35);
}
.brand__title{ font-weight: 800; letter-spacing:.2px; }
.brand__subtitle{ color: var(--muted); font-size: 12px; margin-top: 2px; }

.nav{ display:flex; align-items:center; gap: 10px; }
.nav__link{
  color: var(--muted);
  text-decoration:none;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid transparent;
}
.nav__link:hover{ color: var(--text); border-color: var(--border); background: rgba(255,255,255,.04); }
.nav__link--active{ color: var(--text); border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.05); }

/* ====== Typography ====== */
.h1{ font-size: 22px; margin: 0 0 6px; }
.h2{ font-size: 18px; margin: 0 0 6px; }
.muted{ color: var(--muted); line-height: 1.4; }

/* ====== Buttons + Inputs ====== */
.btn{
  appearance:none;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 14px;
  cursor:pointer;
  transition: transform .15s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
}
.btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.25); }
.btn:active{ transform: translateY(0); }
.btn:disabled{ opacity: .45; cursor:not-allowed; transform:none; }
.btn--primary{
  background: linear-gradient(135deg, rgba(80,160,255,.55), rgba(255,70,220,.35));
  border-color: rgba(255,255,255,.22);
}
.btn--danger{
  background: linear-gradient(135deg, rgba(255,90,90,.45), rgba(255,140,70,.25));
  border-color: rgba(255,255,255,.22);
}

.search, .select{
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.05);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 14px;
  outline: none;
}
.search{ min-width: min(420px, 100%); }
.select{ min-width: 210px; }
.search::placeholder{ color: rgba(255,255,255,.45); }

.toggle{
  display:flex;
  align-items:center;
  gap: 8px;
  color: var(--muted);
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.04);
}

/* ====== Odds + dots ====== */
.odds{
  display:flex;
  gap: 14px;
  align-items:center;
  flex-wrap: wrap;
  margin-top: 14px;
  padding: 10px 12px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.12);
}
.odds__item{ color: var(--muted); display:flex; align-items:center; gap: 8px; font-size: 13px; }
.dot{
  width: 10px; height: 10px;
  border-radius: 999px;
  box-shadow: 0 0 18px rgba(255,255,255,.2);
}
.dot--common{ background: var(--common); }
.dot--uncommon{ background: var(--uncommon); }
.dot--rare{ background: var(--rare); }

/* ====== Pack stage ====== */
.packstage{
  display:flex;
  justify-content:center;
  padding: 18px 0 6px;
}
.pack{
  position: relative;
  width: min(340px, 90vw);
  height: 220px;
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,.18);
  background:
    radial-gradient(circle at 25% 25%, rgba(255,255,255,.18), transparent 45%),
    linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.02)),
    linear-gradient(135deg, rgba(80,160,255,.32), rgba(255,70,220,.26));
  box-shadow: 0 26px 70px rgba(0,0,0,.55);
  cursor: pointer;
  user-select:none;
  overflow:hidden;
  transform: translateZ(0);
}
.pack:focus{ outline: 2px solid rgba(80,160,255,.35); outline-offset: 3px; }

.pack__foil{
  position:absolute; inset:-80px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.25), transparent 45%),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,.12), transparent 55%),
    linear-gradient(120deg, rgba(255,255,255,.02), rgba(255,255,255,.08), rgba(255,255,255,.02));
  transform: rotate(12deg);
  filter: blur(0px);
  opacity: .95;
}

.pack__shine{
  position:absolute; inset:-60px;
  background: linear-gradient(120deg, transparent, rgba(255,255,255,.22), transparent);
  transform: translateX(-60%) rotate(12deg);
  animation: packShine 2.2s ease-in-out infinite;
  opacity: .65;
  mix-blend-mode: screen;
}

@keyframes packShine{
  0%{ transform: translateX(-60%) rotate(12deg); opacity: .25; }
  55%{ opacity: .85; }
  100%{ transform: translateX(60%) rotate(12deg); opacity: .25; }
}

.pack__label{
  position:absolute;
  left: 18px; bottom: 16px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(10px);
}
.pack__labelTop{ font-weight: 900; letter-spacing: 1px; }
.pack__labelBottom{ color: var(--muted); font-size: 12px; margin-top: 2px; }

.pack__tear{
  position:absolute;
  top: -40px; left: -40px;
  width: 90px; height: 90px;
  border-radius: 999px;
  background: rgba(0,0,0,.38);
  filter: blur(0px);
  opacity: 0;
  transform: scale(.6);
}

.pack--opening{ animation: packShake .55s ease-in-out; }
@keyframes packShake{
  0%{ transform: rotate(0deg) scale(1); }
  15%{ transform: rotate(-1.6deg) scale(1.01); }
  30%{ transform: rotate(1.2deg) scale(1.01); }
  45%{ transform: rotate(-1.1deg) scale(1.01); }
  60%{ transform: rotate(1.0deg) scale(1.01); }
  100%{ transform: rotate(0deg) scale(1.0); }
}

.pack--torn .pack__tear{
  animation: tearPop .6s ease forwards;
}
@keyframes tearPop{
  0%{ opacity: 0; transform: translate(0,0) scale(.5); }
  55%{ opacity: 1; transform: translate(90px, 70px) scale(2.6); }
  100%{ opacity: 0; transform: translate(120px, 90px) scale(3.4); }
}

/* ====== Reveal grid ====== */
.reveal{
  margin-top: 12px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
  min-height: 120px;
}

/* ====== Card ====== */
.card{
  position: relative;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.04);
  overflow:hidden;
  transform-style: preserve-3d;
  perspective: 1000px;
  box-shadow: 0 10px 26px rgba(0,0,0,.45);
}
.card__glow{
  position:absolute; inset:-22px;
  opacity: 0;
  filter: blur(14px);
  transition: opacity .3s ease;
  z-index: 0;
}
.card__imgWrap{
  position: relative;
  aspect-ratio: 2.5 / 3.5;
  width: 100%;
  z-index: 1;
}
.card__img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display:block;
  transform: translateZ(0);
}

.card__meta{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 8px;
  padding: 10px 10px 12px;
  border-top: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.12);
  z-index: 1;
  position: relative;
}
.card__name{
  font-size: 13px;
  color: rgba(255,255,255,.85);
  overflow:hidden;
  white-space:nowrap;
  text-overflow: ellipsis;
}
.badge{
  font-size: 11px;
  padding: 5px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  color: rgba(255,255,255,.82);
  background: rgba(255,255,255,.06);
  text-transform: capitalize;
}
.badge--common{ box-shadow: 0 0 18px var(--common); }
.badge--uncommon{ box-shadow: 0 0 18px var(--uncommon); }
.badge--rare{ box-shadow: 0 0 18px var(--rare); }
.badge--legendary{ box-shadow: 0 0 18px var(--legendary); }
.badge--ultra\ x\ rare{ box-shadow: 0 0 18px var(--ultrax); }

/* Flip */
.card__face{
  position:absolute; inset:0;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}
.card__front{ transform: rotateY(180deg); }
.card__back{
  display:flex;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.12), transparent 42%),
    linear-gradient(135deg, rgba(80,160,255,.22), rgba(255,70,220,.16)),
    rgba(255,255,255,.03);
}
.card__backMark{
  width: 70%;
  height: 70%;
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,.16);
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 45%),
    linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  display:flex;
  align-items:center;
  justify-content:center;
  color: rgba(255,255,255,.75);
  font-weight: 900;
  letter-spacing: 1px;
}

/* Reveal animation */
.card--deal{
  animation: dealIn .34s ease both;
}
@keyframes dealIn{
  from{ transform: translateY(18px) scale(.98); opacity: 0; }
  to{ transform: translateY(0) scale(1); opacity: 1; }
}

.card--flip .card__back{ transform: rotateY(180deg); }
.card--flip .card__front{ transform: rotateY(360deg); }
.card__back, .card__front{
  transition: transform .55s cubic-bezier(.2,.85,.2,1);
}

.card--revealed .card__glow{ opacity: 1; }

/* Glows */
.rarity-common .card__glow{ background: radial-gradient(circle at 50% 50%, var(--common), transparent 55%); }
.rarity-uncommon .card__glow{ background: radial-gradient(circle at 50% 50%, var(--uncommon), transparent 55%); }
.rarity-rare .card__glow{ background: radial-gradient(circle at 50% 50%, var(--rare), transparent 55%); }
.rarity-legendary .card__glow{ background: radial-gradient(circle at 50% 50%, var(--legendary), transparent 55%); }
.rarity-ultra\ x\ rare .card__glow{ background: radial-gradient(circle at 50% 50%, var(--ultrax), transparent 55%); }

/* Legendary / Ultra sparkle overlay */
.card__sparkle{
  position:absolute; inset:-40px;
  opacity: 0;
  z-index: 0;
  pointer-events:none;
  mix-blend-mode: screen;
  background:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,.18), transparent 45%),
    radial-gradient(circle at 60% 30%, rgba(255,255,255,.10), transparent 55%),
    linear-gradient(120deg, transparent, rgba(255,255,255,.22), transparent);
  transform: translateX(-45%) rotate(10deg);
}
.card--revealed.rarity-legendary .card__sparkle,
.card--revealed.rarity-ultra\ x\ rare .card__sparkle{
  opacity: .65;
  animation: sparkleSweep 1.4s ease-in-out infinite;
}
@keyframes sparkleSweep{
  0%{ transform: translateX(-50%) rotate(10deg); opacity: .25; }
  50%{ opacity: .75; }
  100%{ transform: translateX(50%) rotate(10deg); opacity: .25; }
}

/* ====== Collection UI ====== */
.summary{
  margin-top: 10px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}
.summaryCard{
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.10);
  padding: 12px 12px;
}
.summaryCard__top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.summaryCard__label{ color: var(--muted); font-size: 12px; text-transform: capitalize; }
.summaryCard__count{ font-size: 20px; font-weight: 900; }
.summaryCard__sub{ color: rgba(255,255,255,.55); font-size: 12px; margin-top: 4px; }

.tabs{
  margin-top: 14px;
  display:flex;
  gap: 8px;
  flex-wrap: wrap;
}
.tab{
  appearance:none;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.04);
  color: var(--muted);
  padding: 10px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: background .15s ease, transform .15s ease, color .15s ease, border-color .15s ease;
}
.tab:hover{ transform: translateY(-1px); color: var(--text); border-color: rgba(255,255,255,.24); }
.tab--active{ color: var(--text); background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.26); }

.collectionToolbar{
  margin-top: 12px;
  display:flex;
  gap: 10px;
  align-items:center;
  flex-wrap: wrap;
}

.grid{
  margin-top: 14px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 12px;
}

.countPill{
  position:absolute;
  top: 10px; right: 10px;
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.18);
  padding: 6px 8px;
  border-radius: 999px;
  font-size: 12px;
  z-index: 2;
}

.card--unowned{
  opacity: .22;
  filter: grayscale(.2);
}

.dialog{
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 20px;
  background: rgba(10,12,18,.92);
  color: var(--text);
  padding: 0;
}
.dialog::backdrop{ background: rgba(0,0,0,.55); }
.dialog__inner{ padding: 16px; min-width: min(440px, 92vw); }
.dialog__actions{ display:flex; justify-content:flex-end; gap: 10px; margin-top: 14px; }
